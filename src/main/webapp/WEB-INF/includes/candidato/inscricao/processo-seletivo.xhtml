<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui">

	<div class="ui-g ui-fluid">
		<div class="ui-g-12 ui-md-6 ui-lg-6">
			<p:outputLabel value="Processo Seletivo" for="campoProcessoSeletivo" />
			<p:autoComplete id="campoProcessoSeletivo" dropdown="true"
				forceSelection="true" scrollHeight="200" styleClass="mar-top-label"
				completeMethod="#{controllerProcessoSeletivo.completeProcessoSeletivo}"
				value="#{controllerProcessoSeletivo.processoSeletivo}"
				var="processoSeletivo" itemValue="#{processoSeletivo}"
				itemLabel="#{processoSeletivo.descricao}">
				<p:ajax event="itemSelect"
					update="panelDetalheProcesso, formIncricao" />
			</p:autoComplete>
		</div>
	</div>

	<p:outputPanel id="panelDetalheProcesso">
		<ui:fragment
			rendered="#{controllerProcessoSeletivo.processoSeletivo != null}">
			<div class="EmptyBox20" />

			<div class="ui-g ui-fluid">
				<div class="ui-g-12 ui-md-6 ui-lg-6">
					<h:outputText value="Descrição: " styleClass="FontBold" />
					<h:outputText
						value="#{controllerProcessoSeletivo.processoSeletivo.descricao}" />
				</div>
				<div class="ui-g-12 ui-md-6 ui-lg-6">
					<h:outputText value="Inscrições: " styleClass="FontBold" />
					<p:outputLabel value="dia " />
					<p:outputLabel
						value="#{controllerProcessoSeletivo.processoSeletivo.dataInicio}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</p:outputLabel>
					<p:outputLabel value=" até às 23h 59min do dia " />
					<p:outputLabel
						value="#{controllerProcessoSeletivo.processoSeletivo.dataFim}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</p:outputLabel>
				</div>
			</div>

			<div class="ui-g ui-fluid">
				<div class="ui-g-12 ui-md-6 ui-lg-6">
					<h:outputText value="Tipo do Processo Seletivo: "
						styleClass="FontBold" />
					<h:outputText
						value="#{controllerProcessoSeletivo.processoSeletivo.tipoProcessoSeletivo.nome}" />
				</div>
				<div class="ui-g-12 ui-md-6 ui-lg-6">
					<h:outputText value="Quantidades de Questões: "
						styleClass="FontBold" />
					<h:outputText
						value="#{controllerProcessoSeletivo.processoSeletivo.quantidadeQuestoes}" />
				</div>
			</div>

			<div class="EmptyBox30" />

			<div class="ui-g ui-fluid">
				<div class="ui-g-12 ui-md-6 ui-lg-6">
					<div align="center">
						<h:outputText value="Município da Prova" styleClass="Fs20" />
					</div>
					<hr />

					<div class="EmptyBox10" />

					<p:outputLabel value="Municipio" for="campoMunicipio" />
					<p:selectOneMenu id="campoMunicipio" styleClass="mar-top-label"
						value="#{controllerProcessoSeletivo.municipio}">
						<f:selectItem noSelectionOption="true" />
						<f:selectItems
							value="#{controllerProcessoSeletivo.processoSeletivo.municipioProvas}"
							var="municipioProva" itemValue="#{municipioProva.municipio}"
							itemLabel="#{municipioProva.municipio.nome}" />
					</p:selectOneMenu>
				</div>
				<div class="ui-g-12 ui-md-6 ui-lg-6">
					<div align="center">
						<h:outputText value="Perfil Profissional" styleClass="Fs20" />
					</div>
					<hr />

					<div class="EmptyBox10" />

					<p:outputLabel value="Perfil Profissional"
						for="campoPerfilProfissional" />
					<p:selectOneMenu id="campoPerfilProfissional"
						styleClass="mar-top-label"
						value="#{controllerProcessoSeletivo.perfilProfissional}">
						<f:selectItem noSelectionOption="true" />
						<f:selectItems
							value="#{controllerProcessoSeletivo.listaPerfilProfissional}"
							var="perfilProfissional" itemValue="#{perfilProfissional}"
							itemLabel="#{perfilProfissional.descricao}" />
					</p:selectOneMenu>
				</div>
			</div>
		</ui:fragment>
	</p:outputPanel>

	<div class="EmptyBox5" />

	<div class="ui-g">
		<div class="ui-g-12 ui-md-4 ui-lg-2">
			<p:commandButton value="Anterior" update="@form" process="@this"
				actionListener="#{controllerCadastroInscricao.podeMostrarDadosPessoais()}" />
		</div>
		<div class="ui-g-12 ui-md-4 ui-lg-8" />
		<div class="ui-g-12 ui-md-4 ui-lg-2">
			<p:commandButton value="Finalizar" process="@form" update="@form"
				onstart="PF('carregando').show();"
				rendered="#{controllerProcessoSeletivo.processoSeletivo.tipoProcessoSeletivo == 'ALUNO'}"
				oncomplete="PF('carregando').hide();return false;"
				action="#{controllerCadastroInscricao.finalizarAluno()}">
				<f:setPropertyActionListener
					value="#{controllerAnexo.documentosAnexados}"
					target="#{controllerCadastroInscricao.inscricao.anexos}" />
				<f:setPropertyActionListener
					value="#{controllerProcessoSeletivo.processoSeletivo}"
					target="#{controllerCadastroInscricao.inscricao.processoSeletivo}" />
				<f:setPropertyActionListener
					value="#{controllerProcessoSeletivo.municipio}"
					target="#{controllerCadastroInscricao.inscricao.municipio}" />
				<f:setPropertyActionListener
					value="#{controllerProcessoSeletivo.perfilProfissional}"
					target="#{controllerCadastroInscricao.inscricao.perfilProfissional}" />
			</p:commandButton>

			<p:commandButton value="Próximo" update="@form"
				rendered="#{controllerProcessoSeletivo.processoSeletivo.tipoProcessoSeletivo == 'PROFESSOR'}"
				actionListener="#{controllerCadastroInscricao.podeMostrarAnexo()}" />
		</div>
	</div>

	<p:dialog id="dlSucessoSalvar" widgetVar="dialogSucessoSalvar"
		modal="true" responsive="true" closable="true" resizable="false"
		showHeader="false">
		<div class="ui-g">
			<div class="ui-g-12 ui-md-12 ui-lg-12">
				<span class="sim-text-color-blue FontBold"> <i
					class="icon-info-circled sim-text-color-blue" /> Inscrição
					realizada com sucesso! Nº Inscrição
					#{controllerCadastroInscricao.inscricao.numero}
				</span>
			</div>
		</div>

		<div class="ui-g">
			<div class="ui-g-12 ui-md-3 ui-lg-3" />
			<div class="ui-g-12 ui-md-6 ui-lg-6">
				<p:button value="Ok" outcome="/candidato/pagina-inicial" />
			</div>
			<div class="ui-g-12 ui-md-3 ui-lg-3" />
		</div>
	</p:dialog>

	<p:dialog widgetVar="mensagemConfirmacao" modal="true"
		responsive="true" closable="true" resizable="false" showHeader="false">
		<div class="ui-g">
			<div class="ui-g-12 ui-md-12 ui-lg-12">
				<span class="FontBold"> <i class="icon-info-circled" /> Você
					já possui uma inscrição para este Processo Seletivo. Se realizar
					uma nova a anterior será cancelada, deseja continuar?
				</span>
			</div>
		</div>

		<div class="ui-g">
			<div class="ui-g-12 ui-md-1 ui-lg-3" />
			<div class="ui-g-12 ui-md-5 ui-lg-3">
				<p:commandButton value="Sim" onstart="PF('carregando').show();"
					oncomplete="PF('carregando').hide();PF('mensagemConfirmacao').hide();PF('dialogSucessoSalvar').show();return false;"
					update="dlSucessoSalvar"
					action="#{controllerCadastroInscricao.realizarInscricao()}">
					<f:setPropertyActionListener value="true"
						target="#{controllerCadastroInscricao.podeCancelarInscricaoAnterior}" />
				</p:commandButton>
			</div>
			<div class="ui-g-12 ui-md-5 ui-lg-3">
				<p:commandButton value="Não" process="@this" update="@form"
					oncomplete="PF('mensagemConfirmacao').hide();PF('carregando').hide();return false;" />
			</div>
			<div class="ui-g-12 ui-md-1 ui-lg-3" />
		</div>
	</p:dialog>

	<p:dialog widgetVar="carregando" modal="true" responsive="true"
		closable="true" resizable="false" showHeader="false">
		<div class="ui-g">
			<div class="ui-g-12">
				<p:graphicImage library="images" name="barra_carregando.gif" />
			</div>
		</div>
	</p:dialog>
	
</ui:composition>